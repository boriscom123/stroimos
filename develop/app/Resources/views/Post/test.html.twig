<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="{{ asset('js/vendor/fileapi/statics/main.css') }}"/>
        <link rel="stylesheet" href="{{ asset('js/vendor/fileapi/jcrop/jquery.Jcrop.min.css') }}"/>
        <script src="{{ asset('bundles/sonatacore/vendor/jquery/dist/jquery.min.js') }}"></script>
        <script>
            var FileAPI = {
                debug: true
                , media: true
                , staticPath: './FileAPI/'
            };
        </script>
        <script src="{{ asset('js/vendor/fileapi/FileAPI/FileAPI.min.js') }}"></script>
        <script src="{{ asset('js/vendor/fileapi/FileAPI/FileAPI.exif.js') }}"></script>
        <script src="{{ asset('js/vendor/fileapi/jquery.fileapi.js') }}"></script>
        <script src="{{ asset('js/vendor/fileapi/jcrop/jquery.Jcrop.min.js') }}"></script>
        <script src="{{ asset('js/vendor/fileapi/statics/jquery.modal.js') }}"></script>
    </head>
    <body>
        <div id="multiupload">
            <form class="b-upload b-upload_multi" action="{{ path('app_news_list') }}" method="POST" enctype="multipart/form-data">
                <div class="js-files b-upload__files">
                    <div class="js-file-tpl b-thumb" data-id="<%=uid%>" title="<%-name%>, <%-sizeText%>">
                        <div data-fileapi="file.remove" class="b-thumb__del">✖</div>
                        <div class="b-thumb__preview">
                            <div class="b-thumb__preview__pic"></div>
                        </div>
                        <div data-fileapi="file.rotate.cw" class="b-thumb__rotate"></div>
                        <div class="b-thumb__progress progress progress-small"><div class="bar"></div></div>
                        <div class="b-thumb__name"><%-name%></div>
                    </div>
                </div>
                <hr>
                <div class="btn btn-success btn-small js-fileapi-wrapper">
                    <span>Add</span>
                    <input type="file" name="filedata">
                </div>
                <div class="js-upload btn btn-success btn-small">
                    <span>Upload</span>
                </div>
                <div>
                    <input type="submit" value="Отправить"/>
                </div>
            </form>
        </div>

        <script>
            $('#multiupload').fileapi({
                multiple: true,
                elements: {
                    ctrl: { upload: '.js-upload' },
                    empty: { show: '.b-upload__hint' },
                    emptyQueue: { hide: '.js-upload' },
                    list: '.js-files',
                    file: {
                        tpl: '.js-file-tpl',
                        preview: {
                            el: '.b-thumb__preview',
                            width: 80,
                            height: 80
                        },
                        upload: { show: '.progress', hide: '.b-thumb__rotate' },
                        complete: { hide: '.progress' },
                        progress: '.progress .bar'
                    }
                }
            });
        </script>
    </body>
</html>